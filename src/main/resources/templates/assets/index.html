<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script type="application/javascript" th:src="@{https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js}"></script>
    <script type="application/javascript" th:src = "@{/js/assets/chart.js}"></script>
    <script type="application/javascript" th:src = "@{/js/assets/asset.js}"></script>
    <script type="application/javascript" th:src = "@{https://canvasjs.com/assets/script/jquery-1.11.1.min.js}"></script>
    <script type="application/javascript" th:src = "@{https://canvasjs.com/assets/script/jquery.canvasjs.min.js}"></script>
</head>
<body>

    <div id="header"></div>

    <h1 id="head">Index</h1>
    <p id="asset-name" th:text="${index.name}"></p>
    <p id="asset-symbol" th:text="${index.symbol}"></p>
    <p th:text="${index.description}"></p>
    <p th:text="${index.currentMarketPrice}"></p>
    <p th:text="${index.averagePurchasePrice}"></p>
    <p th:text="${index.quantityOwned}"></p>
    <p th:text="${index.currency}"></p>
    <p th:text="${index.currencySymbol}"></p>
    <p th:text="${index.exchangeName}"></p>
    <p th:text="${index.isMarketOpen}"></p>
    <p th:text="${index.percentChange}"></p>

    <h2> Purchases</h2>
    <table id="purchase-table">
        <tr>
            <th>Price</th>
            <th>Quantity</th>
            <th>Date</th>
        </tr>
        <tr th:each="purchase: ${purchase}">
            <td th:text="${purchase.price}"></td>
            <td th:text="${purchase.quantity}"></td>
            <td th:text="${purchase.purchaseDate.myFormatDateString}"></td>
            <td></td>
        </tr>
    </table>

    <p>Add new purchase</p>
    <input type="number" placeholder="Enter Quantity" id="quantity"><br>
    <input type="number" placeholder="Enter Price" id="price"><br>
    <input type="text" placeholder="Enter Date" id="date"><br>
    <button id="confirm" asset-type="index">Confirm</button>
    <div id="error-message"></div>

    <form>
        <select onChange=setupChart(this.value) id="period">
            <option value="monthly">Monthly</option>
            <option value="weekly">Weekly</option>
            <option value="daily">Daily</option>
        </select>
    </form>
    <div id="chartContainer" style="height: 370px; width: 100%;"></div>

    <div id="footer"></div>
</body>
</html>
